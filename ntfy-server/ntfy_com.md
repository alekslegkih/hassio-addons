# Краткая памятка по командам **ntfy**

Аддон использует встроенную систему аутентификации **ntfy**.  
Управление пользователями и правами выполняется через CLI внутри контейнера аддона.

---

## Доступ к CLI аддона

Через аддон Home Assistant OS (SSH):

```bash
docker exec -it addon_dc0b8324_ntfy-server /bin/sh
```

Далее все команды выполняются внутри контейнера.

> [TRIP]
> Полную справку всегда можно получить выполнив команды  

```bash
ntfy --help  
ntfy <commands> --help  
```

---

## Краткий перечень основных комманд

```bash
# Получить список пользователей
ntfy user list

# Добавить пользователя
# При выполнении команды будет предложено задать пароль.
ntfy user add USERNAME

# Удалить пользователя
ntfy user remove USERNAME

# Сменить пароль пользоввтале
ntfy user change-pass USERNAME
```

---
> [TRIP]
> По умолчанию в конфигурации включено: **auth-default-access: "deny-all"**  
> Это означает, что доступ к топикам необходимо назначать явно.

---

```bash
# Назначить доступ пользователю к топику

#Чтение и запись:
ntfy access USERNAME TOPIC - read-write

# Только чтение:
ntfy access USERNAME TOPIC - read-only

# Только публикация сообщений:
ntfy access USERNAME TOPIC - write-only 

#Отозвать доступ к топику
ntfy access USERNAME TOPIC - deny

# Просмотреть все правила доступа
ntfy access
```

---

## Примечания

- Все изменения применяются **мгновенно**, перезапуск аддона не требуется
- База пользователей и доступов хранится в файле `/config/auth.db`
- Управление пользователями недоступно через Web UI и выполняется только через CLI
